# sdk-node

Official CommonLedger API library client for node.js

__This library is generated by [alpaca](https://github.com/pksunkara/alpaca)__

## Installation

Make sure you have [npm](https://npmjs.org) installed.

```bash
$ npm install commonledger-sdk
```

#### Versions

Works with [ 0.8 / 0.9 / 0.10 / 0.11 ]

## Usage

```js
var common_ledger = require('commonledger-sdk');

// Then we instantiate a client (as shown below)
```

### Build a client

##### Without any authentication

```js
var client = common_ledger.client();

// If you need to send options
var client = common_ledger.client({}, options);
```

##### Basic authentication

```js
var client = common_ledger.client({
    username: 'pksunkara',
    password: 'password'
}, options);
```

##### Oauth acess token

```js
var client = common_ledger.client('1a2b3', options);
```

##### Oauth client secret

```js
var client = common_ledger.client({
    client_id: '09a8b7',
    client_secret: '1a2b3'
}, options);
```

### Response information

__All the callbacks provided to an api call will recieve the response as shown below__

```js
client.klass('args').method('args', function (err, response) {
    if (err) console.log(err);

    response.body;
    // >>> 'Hello world!'

    response.code;
    // >>> 200

    response.headers;
    // >>> {'content-type': 'text/html'}
}
```

##### HTML response

```js
response.body;
// >>> 'The username is pksunkara!'
```

##### JSON response

```js
response.body;
// >>> {'user': 'pksunkara'}
```

### Request body information

##### RAW request

```js
body = 'username=pksunkara';
```

##### FORM request

```js
body = {'user': 'pksunkara'};
```

##### JSON request

```js
body = {'user': 'pksunkara'};
```

### Client Options

The following options are available while instantiating a client:

 * __base__: Base url for the api
 * __api_version__: Default version of the api (to be used in url)
 * __user_agent__: Default user-agent for all requests
 * __headers__: Default headers for all requests
 * __request_type__: Default format of the request body

### Method Options

The following options are available while calling a method of an api:

 * __api_version__: Version of the api (to be used in url)
 * __headers__: Headers for the request
 * __query__: Query parameters for the url
 * __body__: Body of the request
 * __request_type__: Format of the request body

### Authentication api

Using OAuth 2.0 to connect to Common Ledger



```js
var auth = client.auth();
```

##### Requesting a Token (POST /auth/token)

After redirecting to /auth/authorise this endpoint will return an access token

The following arguments are required:

 * __client_id__: The application client_id
 * __client_secret__: The application client_secret
 * __code__: The code from the authorise request
 * __redirect_url__: The redirect_uri used to set up the application
 * __grant_type__: Either 'authorization_code' when requesting an access token, or 'refresh_token' when refreshing an old access token

```js
auth.token("2a7b7aaa9f05280218629fa5325eee93f448ae62", "f448ae1dcac1bb3f82f460e1b86b639c28ede333", "d6b5cdf4650d52450c90fa6dc5d527652250a159", "http://example.com/oauth_callback", "authorization_code", options, callback);
```

### Accounts api

Manages data relating to the Chart of Accounts

The following arguments are required:

 * __account_id__: The account UUID

```js
var accounts = client.accounts("75e6a24c-772b-11e3-8005-6163636f756e");
```

##### Add account (POST /core.account/add)

Creates a new account in the chart of accounts

The following arguments are required:

 * __organisation_id__: The organisation the account belongs to
 * __account_number__: The account code
 * __name__: The account name
 * __classification__: The account classification
 * __type__: The type of classification for the account
 * __tax__: The tax code that applies to the account
 * __currency__: The currency code that applies to the account

```js
accounts.add("863f2548-7284-11e3-9710-6163636f756e", "200", "Business Tax Account 1", "ASSET", "BANK", "NONE", "NZD", options, callback);
```

##### View account (GET /core.account/view/:account_id)





```js
accounts.view(options, callback);
```

##### Update account (POST /core.account/update/:account_id)

Updates an existing account in the chart of accounts

The following arguments are required:

 * __organisation_id__: The organisation the account belongs to
 * __account_number__: The account code
 * __name__: The account name
 * __classification__: The account classification
 * __type__: The type of classification for the account
 * __tax__: The tax code that applies to the account
 * __currency__: The currency code that applies to the account

```js
accounts.update("863f2548-7284-11e3-9710-6163636f756e", "200", "Business Tax Account 1", "ASSET", "BANK", "NONE", "NZD", options, callback);
```

##### Delete account (GET /core.account/delete/:account_id)

Deletes an account from the chart of accounts



```js
accounts.delete(options, callback);
```

### Tax api

Collection of different tax rates and their codes

The following arguments are required:

 * __tax_id__: The tax UUID

```js
var tax = client.tax("9136fee6-02da-426d-aa01-2b50c17b8a2f");
```

##### Add (POST /core.tax/add)

Add a new tax rate

The following arguments are required:

 * __organisation_id__: The UUID of the organisation this tax rate belongs to
 * __name__: The name of this tax rate
 * __type__: The tax type (tax code)
 * __display_rate__: The rate to display this tax at
 * __effective_rate__: The rate that gets applied for this tax

```js
tax.add("863f2548-7284-11e3-9710-6163636f756e", "15% GST on Income", "OUTPUT2", 15, 15, options, callback);
```

##### View (GET /core.tax/view/:tax_id)

View a tax rate



```js
tax.view(options, callback);
```

##### Update (POST /core.tax/update/:tax_id)

Update an existing tax rate

The following arguments are required:

 * __organisation_id__: The UUID of the organisation this tax rate belongs to
 * __name__: The name of this tax rate
 * __type__: The tax type (tax code)
 * __display_rate__: The rate to display this tax at
 * __effective_rate__: The rate that gets applied for this tax

```js
tax.update("863f2548-7284-11e3-9710-6163636f756e", "15% GST on Income", "OUTPUT2", 15, 15, options, callback);
```

### Journals api

Manages journal entries and journal lines

The following arguments are required:

 * __journal_id__: The journal entry UUID

```js
var journals = client.journals("76afff0a-7368-11e3-9c55-6a6f75726e61");
```

##### Add (POST /core.journal/add)

Add a new journal entry

The following arguments are required:

 * __organisation_id__: The UUID of the organisation this journal entry belongs to
 * __journal_number__: The journal number this journal entry belongs to
 * __journal_type__: The type of journal entry this is
 * __datetime__: The timestamp this journal entry was recorded
 * __notes__: Any notes this journal entry has
 * __lines__: An array of journal lines that make up this journal entry

```js
journals.add("863f2548-7284-11e3-9710-6163636f756e", "200", "", "2012-09-11T00:00:00+12:00", "Common Ledger is the best!", "...", options, callback);
```

##### View (GET /core.journal/view/:journal_id)

View a journal entry



```js
journals.view(options, callback);
```

##### Add (POST /core.journal/update/:journal_id)

Add a new journal entry

The following arguments are required:

 * __organisation_id__: The UUID of the organisation this journal entry belongs to
 * __journal_number__: The journal number this journal entry belongs to
 * __journal_type__: The type of journal entry this is
 * __datetime__: The timestamp this journal entry was recorded
 * __notes__: Any notes this journal entry has
 * __lines__: An array of journal lines that make up this journal entry

```js
journals.update("863f2548-7284-11e3-9710-6163636f756e", "200", "", "2012-09-11T00:00:00+12:00", "Common Ledger is the best!", "...", options, callback);
```

## Contributors
Here is a list of [Contributors]((https://github.org/commonledger/sdk-node/contributors)

### TODO

## License
MIT

## Bug Reports
Report [here](https://github.org/commonledger/sdk-node/issues).

## Contact
Common Ledger (api@commonledger.com)
